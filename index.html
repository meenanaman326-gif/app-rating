<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App Rating & Reviews</title>
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh}
header{padding:20px;text-align:center;color:white;font-size:24px;font-weight:600}
.container{padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}
.card{background:white;border-radius:18px;padding:20px;box-shadow:0 12px 30px rgba(0,0,0,.2)}
.card img{width:90px;height:90px;border-radius:20px;display:block;margin:auto}
.card h3{text-align:center;margin:10px 0}
.stars{display:flex;justify-content:center;gap:6px}
.stars span{font-size:28px;cursor:pointer;color:#ddd;transition:.2s}
.stars span:hover{transform:scale(1.2)}
.stars span.active{color:#fbbf24}
input,textarea{width:100%;margin-top:8px;border-radius:10px;border:1px solid #ccc;padding:8px;font-size:14px}
textarea{resize:none}
button{margin-top:10px;width:100%;padding:10px;border:none;border-radius:10px;background:#667eea;color:white;font-size:14px;cursor:pointer}
.reviews{margin-top:12px;font-size:13px}
.review{background:#f3f4f6;padding:8px;border-radius:8px;margin-top:6px}
.review strong{color:#111}
.time{font-size:11px;color:#555}
footer{text-align:center;color:white;padding:15px;font-size:13px}
</style>
</head>
<body>
<header>⭐ App Rating & Reviews</header>
<div class="container" id="apps"></div>
<footer>User name, rating & time logs included</footer>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// Your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDqhRl1IqkFVmr6Nla1Zfq3x2L2mFv7NJI",
  authDomain: "namkuu-studio-app-rating.firebaseapp.com",
  projectId: "namkuu-studio-app-rating",
  storageBucket: "namkuu-studio-app-rating.firebasestorage.app",
  messagingSenderId: "605436730516",
  appId: "1:605436730516:web:40271236f8a0465d6ea881"
};

// Initialize Firebase & Firestore
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const apps = [
  {name:"WhatsApp", logo:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"},
  {name:"Instagram", logo:"https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg"},
  {name:"Facebook", logo:"https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png"},
  {name:"YouTube", logo:"https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png"},
  {name:"Spotify", logo:"https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg"},
  {name:"Snapchat", logo:"https://upload.wikimedia.org/wikipedia/en/thumb/c/c4/Snapchat_logo.svg/1200px-Snapchat_logo.svg.png"},
  {name:"Amazon", logo:"https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg"},
  {name:"Flipkart", logo:"https://upload.wikimedia.org/wikipedia/commons/1/19/Flipkart_logo.png"},
  {name:"TikTok", logo:"https://upload.wikimedia.org/wikipedia/en/6/6b/TikTok_logo.png"},
  {name:"LinkedIn", logo:"https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png"}
];

const container = document.getElementById('apps');

apps.forEach(app => {
  const card = document.createElement('div');
  card.className = 'card';
  card.innerHTML = `
    <img src="${app.logo}" alt="${app.name} Logo">
    <h3>${app.name}</h3>
    <div class="stars">
      <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
    </div>
    <input placeholder="Your name">
    <textarea placeholder="Write your comment..."></textarea>
    <button>Submit Review</button>
    <div class="reviews"></div>
  `;

  const stars = card.querySelectorAll('.stars span');
  const nameInput = card.querySelector('input');
  const textarea = card.querySelector('textarea');
  const reviews = card.querySelector('.reviews');
  let rating = 0;

  stars.forEach((star,i)=>{
    star.onclick=()=>{
      rating=i+1;
      stars.forEach((s,idx)=>s.classList.toggle('active',idx<=i));
    };
  });

  // Firestore collection reference for this app
  const reviewsRef = collection(db, "reviews_" + app.name.replace(/\s/g,''));

  // Listen for real-time updates
  const q = query(reviewsRef, orderBy("time", "desc"));
  onSnapshot(q, (snapshot)=>{
    reviews.innerHTML = "";
    snapshot.forEach(doc=>{
      const data = doc.data();
      const div = document.createElement('div');
      div.className='review';
      div.innerHTML=`<strong>${data.name}</strong> – ⭐ ${data.rating}/5<br>${data.comment}<br><span class="time">${new Date(data.time).toLocaleString()}</span>`;
      reviews.appendChild(div);
    });
  });

  card.querySelector('button').onclick = async ()=>{
    if(!rating || !textarea.value || !nameInput.value){
      alert('Please enter name, rating and comment');
      return;
    }
    await addDoc(reviewsRef, {
      name: nameInput.value,
      comment: textarea.value,
      rating: rating,
      time: Date.now()
    });
    textarea.value='';
  };

  container.appendChild(card);
});
</script>
</body>
</html>